checks:
  neutron_conflicts: |
    'neutron-api' IN @hotsos.core.plugins.juju.JujuChecksBase.charms AND
    'neutron-gateway' IN @hotsos.core.plugins.juju.JujuChecksBase.charms
  nova_conflicts: |
    'nova-cloud-controller' IN @hotsos.core.plugins.juju.JujuChecksBase.charms and
    'nova-compute' IN @hotsos.core.plugins.juju.JujuChecksBase.charms
conclusions:
  neutron_charm_conflicts:
    decision: neutron_conflicts
    raises:
      type: OpenstackWarning
      message: >-
        This host is running both neutron-api and neutron-gateway charms
        which is not supported and will lead to unexpected behaviour such
        as conflicts when more than one charm writes neutron.conf at once.
  nova_charm_conflicts:
    decision: nova_conflicts
    raises:
      type: OpenstackWarning
      message: >-
        This host is running both nova-cloud-controller and nova-compute charms
        which is not supported and will lead to unexpected behaviour such
        as conflicts when more than one charm writes nova.conf at once.
